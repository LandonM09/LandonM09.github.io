<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Habit Tracker</title>
</head>
<body>
    <h1>Daily Habit Tracker</h1>
    <p>Did you look at any adult websites or goon to any non gf material</p>

    <select id="habitSelect">
        <option value="no">No (good)</option>
        <option value="yes">Yes (bad)</option>
    </select>
    <button onclick="submitHabit()">Submit</button>

    <h2>This week's stats</h2>
    <p>Yes (bad): <span id="yesCount">0</span></p>
    <p>No (good): <span id="noCount">0</span></p>
    <p>Good %: <span id="goodPercent">100%</span></p>

    <script>
        const yesSpan = document.getElementById("yesCount");
        const noSpan = document.getElementById("noCount");
        const goodPercentSpan = document.getElementById("goodPercent");
        const select = document.getElementById("habitSelect");

        function loadCounts() {
            const data = JSON.parse(localStorage.getItem("habitData") || "{}");
            const today = new Date().toISOString().slice(0, 10);

            // Pre-select today's answer if it exists
            if (data[today]) {
                select.value = data[today];
            }

            // Weekly calculation (Sunday to Saturday)
            const weekStart = new Date();
            weekStart.setDate(weekStart.getDate() - weekStart.getDay());
            let yesCount = 0;
            let noCount = 0;

            for (const date in data) {
                const d = new Date(date);
                if (d >= weekStart) {
                    if (data[date] === "yes") yesCount++;
                    if (data[date] === "no") noCount++;
                }
            }

            yesSpan.textContent = yesCount;
            noSpan.textContent = noCount;

            const total = yesCount + noCount;
            const goodPercent = total === 0 ? 100 : Math.round((noCount / total) * 100);
            goodPercentSpan.textContent = goodPercent + "%";
        }

        function submitHabit() {
            const value = select.value;
            const today = new Date().toISOString().slice(0, 10);

            const data = JSON.parse(localStorage.getItem("habitData") || "{}");
            data[today] = value; // overwrite today's entry
            localStorage.setItem("habitData", JSON.stringify(data));

            loadCounts();
            alert("Saved for today: " + value);
        }

        loadCounts();
    </script>
</body>
</html>
